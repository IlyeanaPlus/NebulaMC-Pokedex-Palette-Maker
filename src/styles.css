:root{
  --c-primary: rgba(30,116,231,1);
  --c-primary-edge: rgba(20,90,180,1);
  --c-secondary: rgba(200,215,255,1);
  --c-secondary-edge: rgba(170,190,230,1);
  --c-text: rgba(25,25,25,1);

  --bg: #0f172a;
  --fg: #e5e7eb;
  --panel: #0b1224;
  --border: #243045;
}

/* Base */
*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0; background:var(--bg); color:var(--fg);
  font:14px/1.4 ui-sans-serif,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial,sans-serif;
}

/* App header */
.app-header{
  background:linear-gradient(180deg,#0d1730,#0b1328);
  border-bottom:1px solid var(--border);
  padding:16px 18px;
  position:sticky; top:0; z-index:10;
  text-align:center;
}
.app-header h1{ margin:0; font-size:18px; letter-spacing:.4px; font-weight:800; color:#dfe7ff; }

/* Grid layout — IMPORTANT: stop column stretching to tallest item */
.grid{
  display:grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap:16px;
  align-items:start; /* <- key fix so B/C no longer match A's height */
}

/* Stacks & panels */
.vstack{ --stack-gap:12px; --stack-top-offset:10px; display:flex; flex-direction:column; gap:var(--stack-gap); }
.vstack > *:first-child{ margin-top:var(--stack-top-offset); }

.panel{ background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:16px; }
.header{display:flex;justify-content:space-between;align-items:center}
.hstack{display:flex;gap:12px;align-items:center}
.small{font-size:12px;opacity:.8}

/* Column B spacing */
.col-b{ --stack-gap:10px; }
.col-b .panel{ padding-top:14px; padding-bottom:14px; }
.panel.panel-rules{ padding-top:12px; padding-bottom:12px; }

/* Column C JSON panel — independent height; no forced 100% */
.col-c{ /* no height:100% here */ }
.panel.export.json-values{ display:flex; flex-direction:column; /* padding-bottom set inline or override below */ }

/* Textarea look; no fixed height here (we set it inline for clarity) */
.codearea.fixed{
  width:100%;
  background:#0a1225; color:#dfe7ff;
  border:1px solid var(--border); border-radius:12px;
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;
  /* height/font/line-height/padding are set inline in JSX */
  resize:none; overflow:auto;
}

/* Inputs & buttons */
.button{border:1px solid var(--border);border-radius:8px;padding:6px 10px;cursor:pointer;background:#111a33;color:#dfe7ff}
.button:hover{background:#0e1730}
.number{width:82px;padding:8px;border:1px solid var(--border);border-radius:8px;background:#0d1630;color:#cfe2ff}
.range{width:100%}
.color{width:48px;height:32px;border:1px solid var(--border);border-radius:6px;background:#0d1630}
pre{ background:#0a1225; border:1px solid var(--border); border-radius:12px; padding:10px; overflow:auto; }
.toggle{display:flex;align-items:center;gap:8px}

/* Titles */
.panel h1,.panel h2,.panel h3,.panel .header{ margin:0 0 10px 0; }

/* Palette rows */
.color-row.row-grid{
  display:grid;
  grid-template-columns: 110px 56px 94px 94px 94px 32px;
  align-items:end; column-gap:14px; row-gap:6px; padding:10px 0;
}
.cr-label{font-weight:700; color:#dbe7ff; align-self:center}
.cr-chan.col{display:flex;flex-direction:column;gap:6px}
.cr-chan-label{font-size:11px;opacity:.75;padding-left:2px}
.icon-button{ width:28px;height:28px;display:grid;place-items:center;border:1px solid var(--border);border-radius:8px;background:#111a33;color:#dfe7ff;padding:0;cursor:pointer; }
.icon-button:hover{ background:#0e1730 }
.icon-button.active{ outline:2px solid #9db4ff; outline-offset:2px }

/* Sliders */
.section-title{ font-weight:700; margin:6px 0 4px; }
.slider-row{ display:flex; gap:12px; align-items:center; margin:6px 0; }
.slider-row .slider-label{ width:130px; opacity:.85; }
.rules-top{ justify-content:space-between; align-items:center; margin:6px 0 6px; }
.manual-hint{ opacity:.85; margin:4px 0 6px; }
.manual-hint span{ opacity:.7 }

/* Preview (Dex) */
.dex-panel{ background:#EDEFF4; border:1px solid #cfd7e7; border-radius:18px; padding:12px 12px 8px; color:#1f2940; }
.dex-header{ display:grid; grid-template-columns:40px 1fr 40px 28px; align-items:center; gap:8px; margin-bottom:8px; }
.dex-arrow{ height:28px; width:28px; border-radius:8px; background:#fff; border:1px solid #cfd7e7; display:grid; place-items:center; }
.dex-arrow::before{ content:''; width:6px; height:10px; border-right:2px solid #6c7a95; border-top:2px solid #6c7a95; transform:rotate(225deg); }
.dex-arrow.right::before{ transform:rotate(45deg); }
.dex-title{ height:28px; border-radius:8px; background:var(--c-secondary); color:var(--c-text); font-weight:800; font-size:12px; letter-spacing:.5px; text-transform:uppercase; display:grid; place-items:center; }
.dex-magnify{ height:28px; width:28px; border-radius:8px; background:#fff; border:1px solid #cfd7e7; position:relative; }
.dex-magnify::before{ content:''; position:absolute; width:12px; height:12px; border:2px solid #6c7a95; border-radius:50%; left:6px; top:6px; }
.dex-magnify::after{ content:''; position:absolute; width:8px; height:2px; background:#6c7a95; right:5px; bottom:5px; transform:rotate(45deg); border-radius:1px; }
.dex-scroll{ display:grid; gap:10px; padding-right:4px; }
.dex-row{
  position:relative;
  background:linear-gradient(135deg,var(--c-secondary) 0%,var(--c-secondary) 50%,var(--c-primary) 50%,var(--c-primary) 100%);
  border:1px solid var(--c-secondary-edge);
  border-radius:14px; padding:10px 0;
  display:grid; grid-template-columns:1fr var(--dex-right-w,186px);
  align-items:center; overflow:hidden; box-shadow:0 2px 0 rgba(0,0,0,.05);
}
.dex-left{ padding:0 14px; color:var(--c-text); }
.dex-region{ font-weight:900; font-size:16px; }
.dex-count{ opacity:.86; font-size:12px; margin-top:2px; }
.dex-right{ position:relative; height:100%; display:grid; grid-auto-flow:column; align-items:center; justify-content:end; gap:8px; padding:0 10px; }
.dex-sprite-img{ display:block; image-rendering:pixelated; image-rendering:crisp-edges; background:transparent; border:none; filter: drop-shadow(0 1px 0 rgba(0,0,0,.35)); }
.dex-sil{ background:#000; border-radius:4px; image-rendering:pixelated; }

/* === Reference image checker === */
.checker{
  /* checkerboard background */
  background:
    conic-gradient(#0e1730 25%, #0b1224 0 50%, #0e1730 0 75%, #0b1224 0) 0 0 / 16px 16px;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 8px;

  /* visible even with an empty canvas */
  min-height: 220px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

/* crisp canvas rendering & responsive width */
.checker canvas{
  display: block;
  max-width: 100%;
  height: auto;             /* preserves aspect ratio */
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}
